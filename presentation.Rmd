---
title: "sdsbrowser"
subtitle: Shiny Application for visualisation and analysis of SDS stone artefact data
date: "04/2019"
institute: Institute of Pre- and Protohistoric Archaeology, Kiel University
fontsize: 9pt
output:
  beamer_presentation:
    includes: 
      in_header: preamble.tex
    keep_tex: true
fig_caption: yes
editor_options: 
  chunk_output_type: console
---

```{r, echo = FALSE}
library(magrittr)

# https://stackoverflow.com/questions/25646333/code-chunk-font-size-in-rmarkdown-with-knitr-and-latex
def.chunk.hook  <- knitr::knit_hooks$get("chunk")
knitr::knit_hooks$set(chunk = function(x, options) {
  x <- def.chunk.hook(x, options)
  ifelse(options$size != "normalsize", paste0("\\", options$size,"\n\n", x, "\n\n \\normalsize"), x)
})
knitr::opts_chunk$set(echo = TRUE, cache = TRUE)
```

## TOC

\huge

- Data preservation and sharing in Archaeology

- The SDS System
  - The Idea
  - The Implementation
  
- Making SDS data accessible
  - R & Shiny
  - sdsanalysis
  - sdsbrowser

- Lessons for the future



# Data preservation and sharing in Archaeology

## Context data preservation and sharing

\underline{Problems:}

- Archaeology produces **Bad Data** (pretty shitty Big Data)
  - Volume -- low end of the spectrum
  - Variety -- a lot! And a significant **lack of metadata**
  - (Velocity)
  - Veracity -- highly different data quality
- Lack of data (and code) sharing
- Lack of long term storing strategies

\underline{Positive pressure:}

- Funding and Journal requirements 
- Open Science and Reproducible Research Movement

\underline{Tools and enabling features:}

- Data Storage Providers (e.g. *Archaeology Data Service*)
- Data Journals (e.g. *Journal of Open Archaeology Data*)
- Licensing 
- new **Software, Platforms and Frameworks**



# The SDS System 

## SDS -- The Idea

A. Drafehn/M. Bradtmöller/D. Mischka, SDS – Systematische und digitale Erfassung von Steinartefakten (Arbeitsstand SDS 8.05). Journal Of Neolithic Archaeology 10, 2008. [doi:10.12766/jna.2008.25](https://doi.org/10.12766/jna.2008.25)

\vspace{10px}

> The following contribution offers a **recording system for stone artefacts**. This **compilation of existing systems** from the Upper Paleolithic to the Neolithic should serve as a starting point for **systematic and quantitative analysis** with a uniform **coding** and standardized listing system of the **conventional attributes recorded at lithic inventories**. Therewith a valuable basis for comparative analysis and digital exchange of the data should be guaranteed. 

\underline{Features:}

- Description of **individual** artefacts
- **~200** variables (*color*, *weight*, *preservation*, and specific features by artefact type) with **>1300** predefined values/categories
- Table layout with separate **form sheets**
- Digit based **value encoding**: value "05" in variable *color* means "green"

## SDS -- The Idea

\footnotesize

```{r, echo = FALSE}
" 'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 8, 0, 2, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 8, 0, 2, 1, 0, 0, '...' 
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 8, 0, 2, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 8, 0, 2, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 8, 0, 2, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 8, 0, 2, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 8, 0, 2, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 8, 0, 2, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 7, 0, 1, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 7, 0, 1, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 7, 0, 1, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 7, 0, 1, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 7, 0, 1, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 7, 0, 1, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 7, 0, 1, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 7, 0, 1, 1, 0, 0, '...'
  'L', 'A', 0, 5, 2, 0, 0, 9, 1, 0, 7, 0, 1, 1, 0, 0, '...'
  '...', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...', '...' " %>%
  read.csv(text = ., quote = "'") %>% 
  knitr::kable(
    format = "latex",
    col.names = NULL
  ) %>%
  kableExtra::add_header_above(
    c("digits: 4" = 4, "digits: 4" = 4, "digits: 5" = 5, "digits: 5" = 4)
  ) %>%
  kableExtra::add_header_above(
    c("site" = 4, "year" = 4, "feature number" = 5, "excavation number" = 4)
  ) %>%
    kableExtra::add_header_above(
    c("Variable 1" = 4, "Variable 2" = 4, "Variable 3" = 5, "Variable 4" = 4)
  ) %>%
  kableExtra::add_header_above(
    c("Form sheet 1" = 17)
  )
```

## SDS -- The Idea

![SDS Formsheet organization. Drafehn/Bradtmöller/Mischka 2008, 3.](figures/sds_formsheet_organization.png)

## SDS -- The Implementation

**10 years of use on 20+ sites by dozens of researchers and students with no common supervision: Cultural Evolution!**

\underline{Practical solutions:}

- Elimination of the digit separation, working with spreadsheet applications
- Ignoring most variables
- Adding (a few) new variables and (a few) new values
- Creation of a multi/group artefact description form sheet with **~20** variables

\underline{Consequences:}

- Inconsistent and incongruous file structures
- Undocumented variables and values that only appear individual datasets
- Absolute domination of the multi/group description system



# Making SDS data accessible

## sdsanalysis -- Backend

## sdsbrowser -- Webapp

# Lessons for the future

## Lessons
